(this["webpackJsonpsalt-and-satoshi"]=this["webpackJsonpsalt-and-satoshi"]||[]).push([[0],{372:function(e,t,n){},385:function(e,t){},387:function(e,t){},401:function(e,t){},402:function(e,t){},423:function(e,t){},425:function(e,t){},661:function(e,t){},663:function(e,t){},670:function(e,t){},671:function(e,t){},700:function(e,t){},730:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(2),s=n.n(r),c=n(36),i=n.n(c),o=(n(372),n(53)),u=n(760),l=n(5),d=n.n(l),p=n(62),b=n(43),j=n(325),f=n(326),h=n(327),x=n(329),O={eip1152contractAddress:"0xd07dc4262bcdbf85190c01c996b4c06a461d2430",minterAddress:"0x1efcb24f92daa1e04ba52e3d891beecee00c629d",firebaseConfig:{apiKey:"AIzaSyC8DwM9z-H9cSTCqHR4UGEvW86jL63sre0",projectId:"saltandsatoshi"},INFURA_JSON_RPC_API:{1:"https://mainnet.infura.io/v3/663207cc32894545b804fbc519d9fa2a",42:"https://kovan.infura.io/v3/663207cc32894545b804fbc519d9fa2a"},SELLER_CONTRACT_ADDRESS:{42:"0xD837F0658c74191056f222b3aCf3995e75AA3703"}},y=12e3,m=new j.a({supportedChainIds:[1,42]}),v=new f.a({rpc:{1:O.INFURA_JSON_RPC_API[1]},bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:y}),g=new h.a({chainId:1,url:O.INFURA_JSON_RPC_API[1],pollingInterval:y}),w=new x.a({chainId:1,url:O.INFURA_JSON_RPC_API[1],pollingInterval:y,manifestEmail:"dummy@abc.xyz",manifestAppUrl:"http://localhost:1234"});var C=function(){return Object(a.jsx)("div",{style:{display:"flex",position:"absolute",top:"calc(50% - 100px)",width:"100%"},children:Object(a.jsx)("svg",{style:{margin:"auto",width:200,height:200},children:Object(a.jsx)("use",{width:80,height:80,href:"assets/icons.svg#refresh",fill:"#838b98",children:Object(a.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 40 40",to:"360 40 40",begin:"0s",dur:"4s",repeatCount:"indefinite"})})})})},k=function(e){e.children;var t=e.theConnector,n=e.title,r=Object(o.b)(),s=(r.connector,r.activate);return Object(a.jsx)("a",{href:"#",className:"button n01",onClick:function(e){return e.stopPropagation(),s(t),!1},children:Object(a.jsx)("span",{className:"label",children:n})})};var S=function(){var e=Object(o.b)(),t=e.chainId,n=e.account,r=e.deactivate,s=(e.active,e.error);return n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{id:"buttons02",className:"style1 buttons",children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#",className:"button n01",onClick:function(e){return e.stopPropagation(),!1},children:Object(a.jsx)("span",{className:"label",children:n})})}),1!==t&&Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#",className:"button n01",onClick:function(e){return e.stopPropagation(),!1},children:Object(a.jsxs)("span",{className:"label",children:["Network: ",t]})})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#",className:"button n01",onClick:function(e){return e.stopPropagation(),r(),!1},children:Object(a.jsx)("span",{className:"label",children:"Logout"})})})]}),s&&Object(a.jsxs)("p",{id:"text34",className:"style2",children:["\u26a0\ufe0f ",s.message]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{id:"buttons02",className:"style1 buttons",children:[Object(a.jsx)("li",{children:Object(a.jsx)(k,{theConnector:m,title:"Metamask"})}),Object(a.jsx)("li",{children:Object(a.jsx)(k,{theConnector:g,title:"Ledger"})}),Object(a.jsx)("li",{children:Object(a.jsx)(k,{theConnector:w,title:"Trezor"})}),Object(a.jsx)("li",{children:Object(a.jsx)(k,{theConnector:v,title:"Walletconnect"})})]}),s&&Object(a.jsxs)("p",{id:"text34",className:"style2",children:["\u26a0\ufe0f ",s.message]})]})},T=n(206);n(719);T.a.initializeApp(O.firebaseConfig);var I=T.a.firestore().collection("saltseasons");function N(e){return P.apply(this,arguments)}function P(){return(P=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.where("networkId","==",t).get();case 2:return n=e.sent,a=n.docs.map((function(e){var t=e.data();return t.id=e.id,t})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=n(763),E=n(756),R=n(764),_=n(334);var F={TokenId:"20272",getJsonRpcProvider:function(e,t){return new _.a(e,t)}},M=n(335),L='[{"inputs":[{"internalType":"uint256","name":"_initialPrice","type":"uint256"},{"internalType":"uint256","name":"_priceStep","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[],"name":"Pause","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"payee","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"balance","type":"uint256"}],"name":"Sent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"payer","type":"address"},{"indexed":false,"internalType":"address","name":"nftAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokenPurchase","type":"event"},{"anonymous":false,"inputs":[],"name":"Unpause","type":"event"},{"inputs":[],"name":"currentPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"destroy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceStep","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftAddress","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"purchaseToken","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_payee","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}]';var U={contractABI:L,getContract:function(e,t){return new M.a(e,L,t)}},z=n(336);var D=function(e){return Object(a.jsx)(a.Fragment,{children:"\u039e".concat(Object(z.a)(e.number))})},H=n(762),J=n(754),B=n(755),q=n(757),G=n(758),W=n(759);var K=function(e){var t=s.a.useState(!0),n=Object(b.a)(t,2),r=n[0],c=n[1];switch(e.state){case"MINING":return Object(a.jsxs)(H.a,{open:!0,children:[Object(a.jsx)(J.a,{children:"Please wait"}),Object(a.jsx)(B.a,{style:{padding:30},children:Object(a.jsx)(E.a,{})})]});case"FAILED":return Object(a.jsxs)(H.a,{open:r,onClose:function(){return c(!1)},children:[Object(a.jsx)(J.a,{children:"Oops"}),Object(a.jsx)(B.a,{style:{padding:30},children:Object(a.jsx)("p",{})}),Object(a.jsx)(q.a,{style:{padding:30},children:Object(a.jsx)(G.a,{onClick:function(){return c(!1)},children:"Close"})})]});case"SUCCESS":return Object(a.jsxs)(H.a,{open:r,onClose:function(){return c(!1)},children:[Object(a.jsx)(J.a,{children:"Hooray!"}),Object(a.jsxs)(B.a,{style:{padding:30},children:[Object(a.jsx)("p",{children:"You are the owner of unique SaltSeason"}),Object(a.jsx)("br",{}),Object(a.jsxs)("p",{children:["Now you can ",Object(a.jsx)("a",{href:"https://redeem.saltandsatoshi.com/",children:"redeem"})," your purchase"]})]}),Object(a.jsx)(q.a,{style:{padding:30},children:Object(a.jsx)(W.a,{href:"https://redeem.saltandsatoshi.com/",children:"Redeem"})})]})}};var Y=function(e){var t=e.saltSeason,n=F.getJsonRpcProvider(O.INFURA_JSON_RPC_API[t.networkId],t.networkId),r=Object(o.b)(),c=r.account,i=r.library,u=s.a.useState(void 0),l=Object(b.a)(u,2),j=l[0],f=l[1];s.a.useEffect((function(){if(void 0===j){var e=U.getContract(t.sellerContractAddress,n);f(e)}}),[j]);var h=s.a.useState(void 0),x=Object(b.a)(h,2),y=x[0],m=x[1];s.a.useEffect((function(){if(void 0===y&&c&&i){var e=i.getSigner(c),n=U.getContract(t.sellerContractAddress,e);m(n)}}),[y,c]);var v=s.a.useState(void 0),g=Object(b.a)(v,2),w=g[0],C=g[1];s.a.useEffect((function(){w||j&&Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.currentPrice();case 2:t=e.sent,C(t);case 4:case"end":return e.stop()}}),e)})))()}),[w,j]);var k=s.a.useState(void 0),S=Object(b.a)(k,2),T=S[0],I=S[1];s.a.useEffect((function(){T||j&&Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.priceStep();case 2:t=e.sent,I(t);case 4:case"end":return e.stop()}}),e)})))()}),[T,j]);var N=s.a.useState(void 0),P=Object(b.a)(N,2),_=P[0],M=P[1];s.a.useEffect((function(){j&&void 0===_&&j.queryFilter(j.filters.TokenPurchase).then((function(e){console.log(e),M(e)}))}),[j,_]);var L=s.a.useState(void 0),z=Object(b.a)(L,2),H=z[0],J=z[1],B=s.a.useState(void 0),q=Object(b.a)(B,2),G=q[0],W=q[1],Y=(_||[]).length,Q=t.tokenIds.length===Y,V=void 0!==_&&!!w,X=Q?void 0:t.tokenIds[Y],Z=function(){var e=Object(p.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J(void 0),c){e.next=3;break}return e.abrupt("return",J("Connect to blockchain (no account)"));case 3:if(w){e.next=5;break}return e.abrupt("return",J("Connect to blockchain (no contract data)"));case 5:if(y){e.next=7;break}return e.abrupt("return",J("Connect to blockchain (no contract)"));case 7:if(X){e.next=9;break}return e.abrupt("return",J("Season is over"));case 9:return e.next=11,y.purchaseToken(t.erc721ContractAddress,X,{value:w});case 11:return n=e.sent,e.next=14,n.wait(1);case 14:if(0!==e.sent.status){e.next=17;break}throw"Transaction was reverted";case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(A.a,{display:"flex",flexDirection:"row",justifyContent:"center",children:[Object(a.jsx)("div",{style:{flexBasis:"50%",backgroundImage:"url(".concat(t.posterUrl,")"),backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",minHeight:400}}),Object(a.jsxs)("div",{style:{flexBasis:"50%",padding:"3em",fontFamily:"MontserraT, sans-serif"},children:[Object(a.jsxs)("p",{children:["SEASON: ",t.number]}),Object(a.jsx)("br",{}),Object(a.jsxs)("p",{children:["TITLE: ",t.title]}),Object(a.jsx)("br",{}),Object(a.jsxs)("p",{children:["NUMBER CREATED: ",t.tokenIds.length]}),Object(a.jsx)("br",{}),Object(a.jsxs)("p",{children:["CURRENT PRICE: ",w?Object(a.jsx)(D,{number:w}):Object(a.jsx)(E.a,{size:15})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("p",{children:["PRICE STEP: ",T?Object(a.jsx)(D,{number:T}):Object(a.jsx)(E.a,{size:15})]}),Object(a.jsx)("br",{}),Object(a.jsxs)(A.a,{display:"flex",flexDirection:"row",justifyContent:"between",children:[!V&&Object(a.jsx)(E.a,{size:"20"}),V&&Object(a.jsxs)(a.Fragment,{children:[Q&&Object(a.jsx)("p",{children:"Season is over"}),!Q&&Object(a.jsxs)("ul",{id:"buttons02",className:"style1 buttons",children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#",className:"button n01",onClick:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,W("MINING"),e.next=5,Z();case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),W(void 0),J(e.t0.message),e.abrupt("return",!1);case 12:return W("SUCCESS"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),children:Object(a.jsx)("span",{className:"label",children:"Purchase"})})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://redeem.saltandsatoshi.com/",target:"_blank",className:"button n01",children:Object(a.jsx)("span",{className:"label",children:"Redeem"})})})]})]})]}),H&&Object(a.jsx)(R.a,{label:H,color:"secondary"})]})]}),G&&Object(a.jsx)(K,{state:G})]})};var Q=function(){var e=Object(o.b)(),t=e.connector,n=e.chainId,c=s.a.useState(),i=Object(b.a)(c,2),u=i[0],l=i[1];s.a.useEffect((function(){u&&u===t&&l(void 0)}),[u,t]),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(o.b)(),n=t.active,a=t.error,s=t.activate;Object(r.useEffect)((function(){var t=window.ethereum;if(t&&t.on&&!n&&!a&&!e){var r=function(){console.log("Handling 'connect' event"),s(m)},c=function(e){console.log("Handling 'chainChanged' event with payload",e),s(m)},i=function(e){console.log("Handling 'accountsChanged' event with payload",e),e.length>0&&s(m)},o=function(e){console.log("Handling 'networkChanged' event with payload",e),s(m)};return t.on("connect",r),t.on("chainChanged",c),t.on("accountsChanged",i),t.on("networkChanged",o),function(){t.removeListener&&(t.removeListener("connect",r),t.removeListener("chainChanged",c),t.removeListener("accountsChanged",i),t.removeListener("networkChanged",o))}}}),[n,a,e,s])}(!function(){var e=Object(o.b)(),t=e.activate,n=e.active,a=Object(r.useState)(!1),s=Object(b.a)(a,2),c=s[0],i=s[1];return Object(r.useEffect)((function(){m.isAuthorized().then((function(e){e?t(m,void 0,!0).catch((function(){i(!0)})):i(!0)}))}),[t]),Object(r.useEffect)((function(){!c&&n&&i(!0)}),[c,n]),c}()||!!u);var j=s.a.useState(void 0),f=Object(b.a)(j,2),h=f[0],x=f[1];return s.a.useEffect((function(){h||Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n||42);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})))()}),[h,n]),h?Object(a.jsxs)("div",{children:[Object(a.jsx)("section",{id:"redemption-section",children:Object(a.jsx)("div",{id:"container19",className:"container default full screen",style:{minHeight:"auto"},children:Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsxs)("div",{className:"inner",style:{padding:"3em 6em 1em 6em"},children:[Object(a.jsx)("h2",{id:"text33",style:{fontFamily:"'Permanent Marker'"},children:"SaltSeasons"}),Object(a.jsx)(S,{})]})})})}),Object(a.jsx)(A.a,{display:"flex",flexDirection:"column",style:{marginTop:"3em",color:"lightgray"},children:h.map((function(e){return Object(a.jsx)(Y,{saltSeason:e})}))})]}):Object(a.jsx)(C,{})};function V(e){return new u.a(e)}var X=function(){return Object(a.jsx)(o.a,{getLibrary:V,children:Object(a.jsx)(Q,{})})},Z=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,982)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(X,{})}),document.getElementById("root")),Z()}},[[730,1,2]]]);
//# sourceMappingURL=main.b31b06c6.chunk.js.map